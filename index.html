<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ReactTodoApp</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">

    class TodoApp extends React.Component {
  constructor(props) {
    super(props);
    this.state = { items: [], text: '' };
  
    this.AddTask = this.AddTask.bind(this);
    this.RemoveTask = this.RemoveTask.bind(this);
    this.ClearTasks = this.ClearTasks.bind(this);
  }

  render() {
    return (
      <div>
        <h3>TODO</h3>
        
        <form>
         <button onClick={this.AddTask}>
            + 
          </button>
          <button onClick={this.RemoveTask}>
              -
          </button>
          <button onClick={this.ClearTasks}>
              CLEAR
          </button>
          <label htmlFor="new-todo">
            Click '+' to add new task, '-' to remove last task or clear to clear the list.
          </label>
        </form>
        <TodoList items={this.state.items} />
      </div>
    );
  }


  AddTask(e) {
    e.preventDefault();
    if (!this.state.items.length < 0) {
      return;
    }
    const newItem = {
      text: 'task #' + this.state.items.length,
      id: Date.now()
    };
    this.setState(prevState => ({
      items: prevState.items.concat(newItem),
      text: ''
    }));
  }     

  RemoveTask(e) {
      var array = this.state.items;
      var index = array.indexOf(e.target.value);
      e.preventDefault();
   
      array.splice(index,1);
      this.setState({items: array});
    }
        
    ClearTasks(e) {
        e.preventDefault(); 
      this.setState({items:[]});
    }

  }

class TodoList extends React.Component {
  render() {
    return (
      <ul>
        {this.props.items.map(item => (
          <li key={item.id}>{item.text}</li>
        ))}
      </ul>
    );
  }
}

ReactDOM.render(<TodoApp />, document.getElementById('root'));

    </script>

  </body>
</html>